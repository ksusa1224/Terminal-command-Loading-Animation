<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta http-equiv="Cache-control" content="public" />
<meta name="robots" content="noindex,nofollow" />
<meta name="viewport" content="width=1275px, initial-scale=0.8, maximum-scale=0.8,minimum-scale=0.8, user-scalable=no" />
<title>暗記ノート</title>
<link rel="stylesheet" th:href="@{../css/bootstrap.min.main.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/_husen_modal.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/_main.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/jquery-ui.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/jquery.mobile-1.4.5.min.css}" />
<script th:src="@{../js/jquery-3.1.0.min.js}"></script>
<script th:src="@{../js/jquery.mobile-1.4.5.min.js}"></script>
<script th:src="@{../js/jquery-ui.js}"></script>
<script th:src="@{../js/jquery.ui.touch-punch.js}"></script>
<script th:src="@{../js/jquery.ui.touch-punch.min.js}"></script>
<script th:src="@{../js/contextmenu.js}"></script> 
<script th:src="@{../js/_main.js}"></script>
<script type="text/javascript" th:inline="javascript">
/*<![CDATA[*/
/*]]>*/
</script>
</head>
<body onkeydown="key_event()" onload="javascript:document.getElementById('qa_input').focus();body_load();">
<div id="entire_page">

<div id="crystal_board" class="husen_draggable">
<div id="husen_wrapper" th:utext="${tags}"></div>
<div id="husen_board_context-menu" style="display:none;"> 
  <!-- The actual menu that will be displayed-->
  <ul class="dropdown-menu" style="z-index:1000003">
    <li><a id="husen_custom" class="js-open-modal" data-modal-id="popup1" href="#">付箋の表示順を変更</a></li>
    <li class="divider"></li>
    <li><a id="husen_help" href="#" onclick="javascript:husen_help();">付箋の使い方</a></li>
  </ul>
</div>
<div id="husen_context-menu" style="display:none;"> 
  <!-- The actual menu that will be displayed-->
  <ul class="dropdown-menu">
    <li><a id="refesh_by_date" href="#" onclick="javascript:edit_husen();">付箋名を編集</a></li>
  </ul>
</div>
</div>

<audio id="play_qa" preload="auto">
<source th:src="@{/usr/local/anki_note/application/speech/s_id_000000005_audio.m4a}" type="audio/aac"></source>
</audio>

<audio id="play_qa2" preload="auto">
<source th:src="@{/usr/local/anki_note/application/speech/s_id_000000005_audio.m4a}" type="audio/aac"></source>
</audio>

<audio id="seikai_se" preload="auto">
  <source th:src="@{../sound/seikai.mp3}" type="audio/mp3"></source>
</audio>
<audio id="huseikai_se" preload="auto">
  <source th:src="@{../sound/huseikai2.mp3}" type="audio/mp3"></source>
</audio>
<!--/* テーブル */-->
<img width="100%" id="wood_table" th:src="@{../img/wood_table-min.jpg}" />

<!--/* ノートエリア START */-->
<div id="note_area">
<!--/* ノート */-->
<img id="notebook" th:src="@{../img/ring_note-min.png}" />
<img id="notebook_close" th:src="@{../img/note_cover_premium.png}" />

<!--
<img id="notebook_table" th:src="@{../img/table.jpg}" />
-->
<br />
<!--/* ノートの左ページ */-->
 <img id="logo" th:src="@{../img/logo_emboss.png}" />
 <div id="score">
 <span id="a_total_num">全
 <span id="seitou_sum" style="color:#202DA2;" th:text="${seitou_sum}">&#8203;</span>
 問中
 <span id="seikai_sum" style="color:#FF0000;" th:text="${seikai_sum}">&#8203;</span>
 問正解</span>
 </div>

<!--/* ノートの左ページ */-->
 <div id="note_left">
  <div id="qa_area" th:utext="${qa_html}"></div>
	<table id="lines-left" cellpadding="0" cellspacing="0">
		<tr th:each="i : ${#numbers.sequence( 1, 25)}"><td class="note-line"></td></tr>
	</table>
	<div class="page">Page <span id="page_left" class="page">1</span>
	/
	<span class="total_pages" th:text="${total_pages}"></span></div>
 </div>

<!--/* ノートの右ページ */-->
 <div id="note_right">
  <div id="qa_area_right" th:utext="${qa_html_right}"></div>
	<table id="lines-right" cellpadding="0" cellspacing="0">
		<tr th:each="i : ${#numbers.sequence( 1, 25)}"><td class="note-line"></td></tr>
	</table>
	<div class="page_right">Page <span id="page_right" class="page">2</span>
	/
	<span class="total_pages" id="total_pages" th:text="${total_pages}"></span></div>
 </div>
 <br />
<!--/* ノートエリア END */-->
</div>

<!--/* 消しゴム */-->
<img id="erasor" th:src="@{../img/eraser.png}" />

<!--/* スライム */-->
<img id="slime" th:src="@{../img/smileslime2.png}" onclick="slime_speak();" />

<!--/* 吹き出し */-->
<img id="balloon" th:src="@{../img/balloon.png}" />

<!--/* セリフ */-->
<div id="serif">&#8203;</div> 

<img id="premium" th:src="@{../img/premium.png}" />

<div id="navigation">
<a href="../index.html"><img class="black_button" th:src="@{../img/tag_top.png}" /></a>
<img class="black_button" th:src="@{../img/tag_usage.png}" />
<a href="../logout.html"><img class="black_button" th:src="@{../img/tag_logout.png}" /></a>
<br />
<img class="black_button" th:src="@{../img/tag_tag.png}" />
<img class="black_button" th:src="@{../img/tag_kiyaku.png}" />
<img class="black_button" th:src="@{../img/tag_setting.png}" />
</div>

<!--/* 青ペン */-->
<a href="#" onclick="append_blue();"><img id="blue_pen" th:src="@{../img/blue_pen.png}" /></a>

<!--/* 赤ペン */-->
<a href="#" onclick="append_red()"><img id="red_pen" th:src="@{../img/red_pen.png}" /></a>

<!--/* QAパネル */-->
<img id="qa_panel" th:src="@{../img/qa_card.png}" />
<a href="#" onclick="change_mode()"><img id="edit_mode" th:src="@{../img/register_mode.png}" /></a>
<!-- <img id="new_card" th:src="@{../img/new_card.png}" /> -->

<div id="form_grandparent">
<div id="form_parent">
<form th:action="@{'/' + ${owner_id} + '/main.html'}" method="post" onsubmit="javascript:copy_to_hidden();">
<!--/* QA文登録エリア start */-->
<div id="scrollable">
	<div id="qa_input" contenteditable="true" data-ph="ここに問題と解答を入力"
	 onkeypress="javascript:enter();" onfocus="javascript:qa_focus(this);" tabindex="1">
	</div>
	<textarea id="qa_input_hidden" name="qa_input_hidden" style="display:none;">&#8203;</textarea>
	<!--/* QA文登録エリア end */-->
	<div id="spacer" style="height:5px;"></div>
	<!-- <input id="yomudake_flg" type="checkbox" name="yomudake_flg" value="off" onclick="change_val(this)" />読むだけ問題&nbsp;
	<input id="reversible_flg" type="checkbox" name="reversible_flg" value="off" onclick="change_val(this)" />リバーシブル問題<br /> --><!-- 重要度：★★★☆☆　難易度：★★★☆☆<br /> -->
	<div id="husen_paste" class="husen_draggable">付箋をドラッグ</div>
	<button id="register" name="register" type="submit" tabindex="2" value="" style="display:none;"></button>
		<img id="wax_stamp" onclick="javascript:copy_to_hidden();register_qa_ajax()" th:src="@{../img/wax_stamp.png}" width="65px" title="Q＆A登録&#013;（Shift+Enter)" />
	<textarea id="qa_husen" name="qa_husen"></textarea>
	<div style="height:5px;"></div>
	<input id="qa_id" type="hidden" name="qa_id" />
	<span id='google_image'></span>
<!-- <ResultSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:yahoo:srchmi" xsi:schemaLocation="urn:yahoo:srchmi http://search.yahooapis.com/ImageSearchService/V1/ImageSearchResponse.xsd" totalResultsAvailable="190145" totalResultsReturned="2" firstResultPosition="1">
  <Result>
    <Title>Madonna photo Madonna 6200315</Title>
    <Summary />
    <Url>http://www.poster.net/madonna/madonna-photo-madonna-6200315.jpg</Url>
    <ClickUrl>http://www.poster.net/madonna/madonna-photo-madonna-6200315.jpg</ClickUrl>
    <RefererUrl>http://www.poster.de/Madonna/Madonna-Photo-Madonna-6200315.html</RefererUrl>
    <FileSize>37145</FileSize>
    <FileFormat>jpeg</FileFormat>
    <Height>280</Height>
    <Width>228</Width>
    <Thumbnail>
      <Url>http://thm-a.search.vip.scd.yahoo.com/image/233616151</Url>
      <Height>110</Height>
      <Width>89</Width>
    </Thumbnail>
  </Result>
  <Result>
    <Title>Madonna029</Title>
    <Summary />
    <Url>http://www.madonna.w.webpark.pl/originalimages/madonna029.jpg</Url>
    <ClickUrl>http://www.madonna.w.webpark.pl/originalimages/madonna029.jpg</ClickUrl>
    <RefererUrl>http://www.madonna.w.webpark.pl/index2.htm</RefererUrl>
    <FileSize>102769</FileSize>
    <FileFormat>jpeg</FileFormat>
    <Height>977</Height>
    <Width>760</Width>
    <Thumbnail>
      <Url>http://thm-a.search.vip.scd.yahoo.com/image/295584368</Url>
      <Height>140</Height>
      <Width>108</Width>
    </Thumbnail>
  </Result>
</ResultSet> -->	
</div>
</form>
</div>

</div>
</div>

<div id="note_context-menu" style="display:none"> 
  <!-- The actual menu that will be displayed-->
  <ul class="dropdown-menu">
    <li><a href="#" onclick="javascript:show_red();">一時的に全ての解答を表示（ALT+R）</a></li>
    <li><a href="#" onclick="javascript:hide_red();">一時的に全ての解答を隠す（ALT+W）</a></li>
    <li><a href="#" onclick="javascript:reset_red();">解いた解答だけ表示する（ALT+R / ALT+W）</a></li>
    <li class="divider"></li>
    <li><a href="#" onclick="javascript:to_miseikai();">検索中の全問題を未正解に戻す</a></li>
    <li><a href="#" onclick="javascript:to_seikai();">検索中の全問題を正解にする</a></li>
  </ul>
</div>
<div id="qa_context-menu" style="display:none"> 
  <!-- The actual menu that will be displayed-->
  <ul class="dropdown-menu">
    <li><a href="#" onclick="javascript:edit_qa(null);;">Q&amp;Aを編集</a></li>
    <li><a href="#" onclick="javascript:delete_qa();">Q&amp;Aを削除</a></li>
    <li class="divider"></li>
    <li><a id="q_play" href="#" onclick="javascript:play_q('play');">問題をリピート再生</a></li>
    <li><a id="a_play" href="#" onclick="javascript:play_a('play');">解答をリピート再生</a></li>
    <li><a id="qa_play" href="#" onclick="javascript:play_qa();">問題と解答をリピート再生</a></li>
    <li><a id="stop_audio" href="#" onclick="javascript:stop_audio();">再生を止める</a></li>
    <li class="divider"></li>
    <li><a id="q_image_search" href="#" onclick="javascript:search_q_image();">問題の画像を検索</a></li>
    <li><a id="a_image_search" href="#" onclick="javascript:search_a_image();">解答の画像を検索</a></li>
    <li class="divider"></li>
    <li id="q_example_menu"><a id="q_example" href="#" onclick="javascript:show_q_example();">問題の例文を表示</a></li>
    <li id="a_example_menu"><a id="a_example" href="#" onclick="javascript:show_a_example();">解答の例文を表示</a></li>
    <li id="example_menu_devider" class="divider"></li>
    <li><a href="#" onclick="javascript:slime_speech();">スライムに教える</a></li>
  </ul>
</div>
<div id="date_context-menu" style="display:none"> 
  <!-- The actual menu that will be displayed-->
  <ul class="dropdown-menu">
    <li><a id="refesh_by_date" href="#" onclick="javascript:to_miseikai();">この日の全問題を未正解に戻す</a></li>
    <li><a id="refesh_by_date" href="#" onclick="javascript:to_seikai();">この日の全問題を正解にする</a></li>
  </ul>
</div>
<div id="loupe" title="付箋を虫眼鏡にドラッグで検索"></div>
<script th:src="@{../js/contextmenu.js}"></script> 
<script>
</script>
<div id="popup1" class="modal-box" style="z-index:1000000;width:200px;height:500px;">
  <header> <a href="#" class="js-modal-close close">×</a>
    <h3>付箋の表示順を変更</h3>
  </header>
  <div class="modal-body" style="overflow:scroll;height:350px;">
  	<p style="text-align:center;">付箋を上下にドラッグ<br />して表示順を変更</p>
	<ul id="sortable" th:utext="${tags_sort}"></ul>
  </div>
  <footer> <a href="#" class="btn btn-small" onclick="javascript:husen_order();">並び替えを反映</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" class="btn btn-small js-modal-close">Close</a> </footer>
</div>
</body>
</html>