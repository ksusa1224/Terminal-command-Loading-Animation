<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>暗記ノート</title>
<link rel="stylesheet" type="text/css" th:href="@{../css/_main.css}" />
<script type="text/javascript" th:src="@{../js/jquery-3.1.0.min.js}"></script>
<script type="text/javascript">

function change_opacity (seitou) {
	seitou.mouseout(function(){ return false});
	if (seitou.style.opacity == 1)
	{
		seitou.style.opacity = 1;
	}
	else
	{
		seitou.style.opacity = 0;		
	}
}

function mouseout (seitou) {
	if (seitou.style.opacity == 1)
	{
		seitou.style.opacity = 0;
	}
}

// QA再生制御関数　動作仕様：
// ①１回目にクリックしたときリピート再生する
// ②止めたいときはその問題文かどこかしらの問題文をクリックする
// ③もう１度リピート再生するにはまた問題文をどこかしらクリックする
var play_mode_cnt = 0;
function control_qa_saisei(mondaibun__,kaitou__,q_gengo,a_gengo)
{
	play_mode_cnt ++;

	// 奇数回目の問題文クリックの場合
	if (play_mode_cnt % 2 == 1)
	{
		play_mode = "repeat";			
	}
	// 偶数回目の問題文クリックの場合
	else
	{
		play_mode = "stop";
	}

	if (play_mode == "repeat")
	{
		qa_saisei(mondaibun__,kaitou__,q_gengo,a_gengo,play_mode);
	}
	else if (play_mode == "stop")
	{
		window.speechSynthesis.cancel();			
	}
}

function qa_saisei(mondaibun_, kaitou_,q_gengo_,a_gengo_,play_mode)
{
	var q_msg = new SpeechSynthesisUtterance(mondaibun_);
	var voices = window.speechSynthesis.getVoices();
 	if (q_gengo_ == "日本語")
	{
        q_msg.default = true;
 		q_msg.voice = voices[0]; // Otoya
		q_msg.volume = 0.4;
		q_msg.pitch = 0.9;
		q_msg.lang = "ja-JP";
	}else
	{
        q_msg.default = true;
		// q_msg.voice = voices[6];//Vicky
		q_msg.volume = 1;
		q_msg.lang = "en-US";
	}
	window.speechSynthesis.speak(q_msg);

	var a_msg = new SpeechSynthesisUtterance(kaitou_);
	if (a_gengo_ == "日本語")
	{
		a_msg.lang = "ja-JP";
 		//a_msg.voice = voices[46]; // Otoya
		a_msg.volume = 0.4;
		a_msg.pitch = 1;
		window.speechSynthesis.speak(a_msg);
	}
//	else if (a_gengo == "読むだけ")
//	{
		// 読むだけ問題の正答は読み上げない
//	}
	else
	{
        a_msg.default = true;
		a_msg.voice = voices[62];//Vicky
		a_msg.volume = 1;
		a_msg.lang = "en-US";
		window.speechSynthesis.speak(a_msg);		
	}
	
	if (play_mode == "repeat")
	{
		qa_saisei(mondaibun_,kaitou_,q_gengo_,a_gengo_,play_mode);
	}
}

function copyContent () {
   /*
    document.getElementById("qa_input_hidden").value =  
        document.getElementById("qa_input").innerHTML;
    return true;
    */
}

</script>
</head>
<body onload="document.getElementById('qa_input').focus()" th:style="'background:url(' + @{../img/notebook-table.jpg} + ');background-size:100%'">
<br />
<!--
<div id="top_border"></div>
<span id="qa_area" th:utext="${qa_html}"></span>
<div id="bottom_border"></div>
<div th:utext="${qa_html}" style="width:1663px;height:1174px;'" th:style="'background: url(' + @̣{../img/notebook.png} + ') repeat-y right; width: 6px;'"></div>
<div th:style="background: url(' + @̣{../img/notebook.png} + ')"></div>
<div th:utext="${qa_html2}" th:style="'background:url(' + @{../img/notebook2.png} + ');width:831px;height:587px;background-size: 831px 587px;'"></div>
-->
 <div style="width:355px;padding-top:100px;padding-left:65px;">
  <div id="top_border"></div>
  <span id="qa_area" th:utext="${qa_html}"></span>
  <div id="bottom_border"></div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
 </div>
 <div style="width:355px;top:109px;right:417px;position:absolute;">
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
  <div id="bottom_border">&nbsp;</div>
 </div>
 <br />
<div style="position:absolute;right:58px;top:500px;padding:20px;">
<img th:src="@{../img/eraser.png}" style="z-index:1000;width:130px" />
</div> 
<!--
<div style="position:absolute;right:300px;top:200px;padding:20px;">
<img th:src="@{../img/music_pen.png}" style="z-index:100;width:50px" />
</div> 
-->
<div style="position:absolute;right:200px;top:500px;padding:20px;">
<img th:src="@{../img/smileslime.png}" style="z-index:100;width:150px" />
</div> 
<!--
問題<input id="mondai_input" type="text" name="mondai" /><br />
解答<input id="seitou_input" type="text" name="seitou" /><br />
-->
<div style="position:absolute;top:75px;right:0px;">
<img th:src="@{../img/blue_pen.png}" style="width:400px;" />
</div>
<div style="position:absolute;top:125px;right:0px;">
<img th:src="@{../img/red_pen.png}" style="width:400px;" />
</div>
<div th:style="'position:absolute;right:40px;top:125px;background-image:url(' + @{../img/qa_panel.png} + ');background-size:100% 100%;width:350px;height:400px;'">
<div style="padding-left:30px;padding-top:80px;">
<form th:action="@{'/' + ${owner_id} + '/main.html'}" method="post" onsubmit='return copyContent()'>
QA. 

<!--/* QA文登録エリア start */-->
<div id="qa_input" contenteditable="true" style="width:250px;" onkeypress="javascript:enter(this);">	
<span class='q_input' id="1">&#8203;</span>
</div>
<!--
<textarea id="qa_input_hidden" name="qa_input_hidden" style="display:none;">
</textarea>
-->
<!--/* QA文登録エリア end */-->

<input type="checkbox" name="yomudake_flg" />読むだけ問題&nbsp;
<input type="checkbox" name="reversible_flg" />リバーシブル問題<br />
<button name="register" type="button">問題登録</button>
</form>
<!--
<img th:src="@{../img/qa_panel.png}" style="width:300px" />
-->
</div>
</div>
</body>
</html>