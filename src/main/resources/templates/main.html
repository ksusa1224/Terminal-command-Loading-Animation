<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>暗記ノート</title>
<link rel="stylesheet" type="text/css" th:href="@{../css/_main.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/jquery-ui.css}" />
<link rel="stylesheet" type="text/css" th:href="@{../css/anythingzoomer.css}" />
<script th:src="@{../js/jquery-3.1.0.min.js}"></script>
<script th:src="@{../js/jquery-ui.js}"></script>
<script th:src="@{../js/_main.js}"></script>
<script type="text/javascript" th:src="@{../js/monocle.js}"></script>
<script type="text/javascript" th:src="@{../js/example.js}"></script>
<script th:src="@{../js/jquery.anythingzoomer.js}"></script>
<script type="text/javascript">

function change_opacity (seitou) {
	seitou.mouseout(function(){ return false});
	if (seitou.style.opacity == 1)
	{
		seitou.style.opacity = 1;
	}
	else
	{
		seitou.style.opacity = 0;		
	}
}

function mouseout (seitou) {
	if (seitou.style.opacity == 1)
	{
		seitou.style.opacity = 0;
	}
}

// QA再生制御関数　動作仕様：
// ①１回目にクリックしたときリピート再生する
// ②止めたいときはその問題文かどこかしらの問題文をクリックする
// ③もう１度リピート再生するにはまた問題文をどこかしらクリックする
var play_mode_cnt = 0;
function control_qa_saisei(mondaibun__,kaitou__,q_gengo,a_gengo)
{
	play_mode_cnt ++;

	// 奇数回目の問題文クリックの場合
	if (play_mode_cnt % 2 == 1)
	{
		play_mode = "repeat";			
	}
	// 偶数回目の問題文クリックの場合
	else
	{
		play_mode = "stop";
	}

	if (play_mode == "repeat")
	{
		qa_saisei(mondaibun__,kaitou__,q_gengo,a_gengo,play_mode);
	}
	else if (play_mode == "stop")
	{
		window.speechSynthesis.cancel();			
	}
}

function qa_saisei(mondaibun_, kaitou_,q_gengo_,a_gengo_,play_mode)
{
	var q_msg = new SpeechSynthesisUtterance(mondaibun_);
	var voices = window.speechSynthesis.getVoices();
 	if (q_gengo_ == "日本語")
	{
        q_msg.default = true;
 		q_msg.voice = voices[0]; // Otoya
		q_msg.volume = 0.4;
		q_msg.pitch = 0.9;
		q_msg.lang = "ja-JP";
	}else
	{
        q_msg.default = true;
		// q_msg.voice = voices[6];//Vicky
		q_msg.volume = 1;
		q_msg.lang = "en-US";
	}
	window.speechSynthesis.speak(q_msg);

	var a_msg = new SpeechSynthesisUtterance(kaitou_);
	if (a_gengo_ == "日本語")
	{
		a_msg.lang = "ja-JP";
 		//a_msg.voice = voices[46]; // Otoya
		a_msg.volume = 0.4;
		a_msg.pitch = 1;
		window.speechSynthesis.speak(a_msg);
	}
//	else if (a_gengo == "読むだけ")
//	{
		// 読むだけ問題の正答は読み上げない
//	}
	else
	{
        a_msg.default = true;
		a_msg.voice = voices[62];//Vicky
		a_msg.volume = 1;
		a_msg.lang = "en-US";
		window.speechSynthesis.speak(a_msg);		
	}
	
	if (play_mode == "repeat")
	{
		qa_saisei(mondaibun_,kaitou_,q_gengo_,a_gengo_,play_mode);
	}
}
function dialog()
{
    
    $( "#crystal_board" ).draggable();
    $( "#dialog" ).draggable();
    $( "#slime" ).draggable();
    $( "#erasor" ).draggable();
    $( "#blue_pen" ).draggable();
    $( "#red_pen" ).draggable();
    $( "#qa_panel" ).draggable();
    $( ".husen" ).draggable();
/*
$('.husen')
        .bind('drag',function( event ){
		var offset = $(this).offset();
        var zoomPointX = offset.left;
        var zoomPointY = offset.top;
        var offsetX = -(zoomPointX * -0.5);
		var offsetY = -(zoomPointY * -0.5);
		alert(offsetX);
		alert(offsetY);
        var clone = $("#clone").clone();
        //alert(clone.html());
        $("#canvas").html(clone);
        $("#canvas").css("position","absolute");
        $("#canvas").css("top",zoomPointY.toString());
        $("#canvas").css("left",zoomPointX.toString());
        // $("#canvas").css("top","-200");
        // $("#canvas").css("left","-100");
        //$("#canvas").css("clip","circle(60px at center)");
        // $("#canvas").css("width","50px");
        // $("#canvas").css("height","50px");
        // $("#canvas").css("overflow","hidden");
        //$("#canvas").css("zoom","150%");
        
        // $("#canvas").css("","");
		});*/
}
</script>
</head>
<body onkeydown="key_event()" onload="javascript:document.getElementById('qa_input').focus();to_right_page();dialog();">
<div id="clone">
<!--
<div id="dialog" class=".ui-draggable .ui-dialog-titlebar" title="Basic dialog" style="display:none;">
-->
<div id="crystal_board">
<div class="husen">
英単語</div>
<div class="husen">
大学受験</div>
<div id="loope">
ルーペ</div>
</div>

<audio id="seikai_se" preload="auto">
  <source th:src="@{../sound/seikai.mp3}" type="audio/mp3"></source>
</audio>
<audio id="huseikai_se" preload="auto">
  <source th:src="@{../sound/huseikai.mp3}" type="audio/mp3"></source>
</audio>


<img id="notebook_table" th:src="@{../img/notebook-table.jpg}" />
<br />
 <img th:src="@{../img/logo_emboss.png}" style="width:130px;position:absolute;top:90px;left:70px;" />
 <div id="score">
 <span id="a_total_num">全
 <span id="seitou_sum" style="color:#202DA2;" th:text="${seitou_sum}"></span>&nbsp;問中&nbsp;<span id="seikai_sum" style="color:#FF0000" th:text="${seikai_sum}"></span>&nbsp;問正解</span>
 </div>
 <div id="note_left">
  <div id="qa_area" th:utext="${qa_html}"></div>
<table id="lines-left" cellpadding="0" cellspacing="0">
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
</table>
 </div>
 <div id="note_right">
  <div id="qa_area_right"></div>
<table style="position:absolute;top:-2px;border:none;z-index:-1" cellpadding="0" cellspacing="0">
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
	<tr><td class="note-line"></td></tr>
</table>
 </div>
 <br />

<!--/* 消しゴム */-->
<img id="erasor" th:src="@{../img/eraser.png}" />

<!--/* スライム */-->
<img id="slime" th:src="@{../img/smileslime.png}" />

<!--/* 吹き出し */-->
<img id="balloon" th:src="@{../img/balloon.png}" />

<!--/* セリフ */-->
<div id="serif">&#8203;</div> 

<!--/* 青ペン */-->
<img id="blue_pen" th:src="@{../img/blue_pen.png}" />

<!--/* 赤ペン */-->
<img id="red_pen" th:src="@{../img/red_pen.png}" />

<!--/* QAパネル */-->
<img id="qa_panel" th:src="@{../img/qa_panel.png}" />

<div id="form_grandparent">
<div id="form_parent">
<form th:action="@{'/' + ${owner_id} + '/main.html'}" method="post" onsubmit="javascript:copy_to_hidden();ajax_reload();">
QA. 

<!--/* QA文登録エリア start */-->
<div id="qa_input" contenteditable="true" style="width:250px;" 
 onkeypress="javascript:enter();" onfocus="javascript:qa_focus(this);" tabindex="1">
</div>
<textarea id="qa_input_hidden" name="qa_input_hidden" style="display:none;">&#8203;</textarea>
<!--/* QA文登録エリア end */-->
<div id="spacer" style="height:5px;"></div>
<input id="yomudake_flg" type="checkbox" name="yomudake_flg" value="off" onclick="change_val(this)" />読むだけ問題&nbsp;
<input id="reversible_flg" type="checkbox" name="reversible_flg" value="off" onclick="change_val(this)" />リバーシブル問題<br />
重要度：★★★☆☆　難易度：★★★☆☆<br />
<button name="register" type="submit" tabindex="2">問題登録</button>
</form>
</div>
</div>
</div> <!-- end clone -->
<!-- <div id="canvas_wrapper">
<div id="canvas"></div>
</div> -->


	<div id="page">
		<div id="the-container">
			ああああああああああ
		</div>
	</div>
    <h1>jQuery monocle plugin demo</h1>

    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>



</body>
</html>